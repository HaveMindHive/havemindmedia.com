<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vessel Geometry Proof | Geometry Math</title>
    <meta name="description" content="The complete geometric proof of the triaxial dipyramid vessel. Seven theorems that lock the geometry.">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../css/geometry-math.css">
    <style>
        .vessel-3d {
            width: 100%;
            max-width: 400px;
            height: 350px;
            margin: 2rem auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
        }

        .theorem-grid {
            display: grid;
            gap: 1rem;
            margin: 2rem 0;
        }

        .theorem-box {
            background: rgba(10, 22, 40, 0.5);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s;
        }

        .theorem-box:hover {
            border-color: var(--gold);
        }

        .theorem-box.proven {
            border-color: var(--green);
            background: rgba(0, 255, 136, 0.05);
        }

        .theorem-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .theorem-header h4 {
            color: var(--gold);
            margin: 0;
        }

        .theorem-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .theorem-status.proven {
            background: var(--green);
            color: var(--midnight);
        }

        .theorem-status.pending {
            background: var(--text-dim);
            color: var(--midnight);
        }

        .theorem-content {
            color: var(--text);
            margin-bottom: 0.5rem;
        }

        .theorem-values {
            font-family: monospace;
            font-size: 0.9rem;
            color: var(--cyan);
            background: rgba(0, 0, 0, 0.3);
            padding: 0.5rem;
            border-radius: 4px;
        }

        .run-proof-btn {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 2rem auto;
            padding: 1rem 2rem;
            background: var(--gold);
            color: var(--midnight);
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .run-proof-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4);
        }

        .summary-box {
            text-align: center;
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 16px;
        }

        .summary-box.success {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(212, 175, 55, 0.1));
            border: 2px solid var(--green);
        }

        .summary-box h3 {
            color: var(--green);
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .point-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .point-table th, .point-table td {
            padding: 0.5rem;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .point-table th {
            color: var(--gold);
        }

        .point-table td {
            color: var(--text);
        }

        .constants-panel {
            background: rgba(10, 22, 40, 0.5);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .constants-panel h4 {
            color: var(--gold);
            margin-bottom: 1rem;
        }

        .constant-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .constant-row:last-child {
            border-bottom: none;
        }

        .constant-name {
            color: var(--cyan);
        }

        .constant-value {
            font-family: monospace;
            color: var(--text);
        }
    </style>
</head>
<body>
    <header class="lesson-header">
        <div class="lesson-badge tier-3">Tier 3 - Revelation</div>
        <h1>Vessel Geometry Proof</h1>
        <p class="subtitle">The complete mathematical verification of the triaxial dipyramid. Seven theorems that lock the geometry.</p>
    </header>

    <main class="lesson-content">
        <div class="container">

            <h2>The Vessel Structure</h2>

            <p>
                The triaxial dipyramid vessel has a specific geometry:
            </p>

            <ul style="list-style: none; padding: 0; margin: 1rem 0;">
                <li style="margin: 0.5rem 0;">&#x2022; <strong>4 diagonal nodes</strong> (NW, NE, SW, SE) — coil positions</li>
                <li style="margin: 0.5rem 0;">&#x2022; <strong>2 apex nodes</strong> (Zenith, Nadir) — top and bottom</li>
                <li style="margin: 0.5rem 0;">&#x2022; <strong>1 crossroads</strong> (O) — center point where s = 0</li>
                <li style="margin: 0.5rem 0;">&#x2022; <strong>4 absent cardinal positions</strong> — the asymmetry</li>
            </ul>

            <div class="constants-panel">
                <h4>Universal Constants</h4>
                <div class="constant-row">
                    <span class="constant-name">κ (kappa)</span>
                    <span class="constant-value">2π/180 ≈ 0.0349 rad</span>
                </div>
                <div class="constant-row">
                    <span class="constant-name">κ-shadow</span>
                    <span class="constant-value">1/κ ≈ 28.6479 Hz</span>
                </div>
                <div class="constant-row">
                    <span class="constant-name">BC angle</span>
                    <span class="constant-value">arccos(2/3) ≈ 48.19°</span>
                </div>
                <div class="constant-row">
                    <span class="constant-name">φ (phi)</span>
                    <span class="constant-value">(1 + √5)/2 ≈ 1.618</span>
                </div>
            </div>

            <h2>Point Coordinates</h2>

            <p>
                With scale = 0.15 m (15 cm from center to diagonal):
            </p>

            <table class="point-table">
                <tr>
                    <th>Point</th>
                    <th>X</th>
                    <th>Y</th>
                    <th>Z</th>
                    <th>Role</th>
                </tr>
                <tr>
                    <td>O</td>
                    <td>0.0000</td>
                    <td>0.0000</td>
                    <td>0.0000</td>
                    <td>crossroads</td>
                </tr>
                <tr>
                    <td>NW</td>
                    <td>-0.1061</td>
                    <td>+0.1061</td>
                    <td>0.0000</td>
                    <td>diagonal</td>
                </tr>
                <tr>
                    <td>NE</td>
                    <td>+0.1061</td>
                    <td>+0.1061</td>
                    <td>0.0000</td>
                    <td>diagonal</td>
                </tr>
                <tr>
                    <td>SW</td>
                    <td>-0.1061</td>
                    <td>-0.1061</td>
                    <td>0.0000</td>
                    <td>diagonal</td>
                </tr>
                <tr>
                    <td>SE</td>
                    <td>+0.1061</td>
                    <td>-0.1061</td>
                    <td>0.0000</td>
                    <td>diagonal</td>
                </tr>
                <tr>
                    <td>Z</td>
                    <td>0.0000</td>
                    <td>0.0000</td>
                    <td>+0.1500</td>
                    <td>apex</td>
                </tr>
                <tr>
                    <td>N</td>
                    <td>0.0000</td>
                    <td>0.0000</td>
                    <td>-0.1500</td>
                    <td>apex</td>
                </tr>
            </table>

            <h2>The Seven Theorems</h2>

            <button class="run-proof-btn" id="run-proof">Run Geometric Proof</button>

            <div class="theorem-grid" id="theorem-grid">
                <div class="theorem-box" data-theorem="1">
                    <div class="theorem-header">
                        <h4>Theorem 1: Crossroads Equidistance</h4>
                        <span class="theorem-status pending">Pending</span>
                    </div>
                    <div class="theorem-content">
                        The crossroads is equidistant from all four diagonal nodes.
                    </div>
                    <div class="theorem-values" id="theorem-1-values">—</div>
                </div>

                <div class="theorem-box" data-theorem="2">
                    <div class="theorem-header">
                        <h4>Theorem 2: Square Formation</h4>
                        <span class="theorem-status pending">Pending</span>
                    </div>
                    <div class="theorem-content">
                        The diagonal nodes form a perfect square with equal sides and diagonals.
                    </div>
                    <div class="theorem-values" id="theorem-2-values">—</div>
                </div>

                <div class="theorem-box" data-theorem="3">
                    <div class="theorem-header">
                        <h4>Theorem 3: Fourfold Symmetry</h4>
                        <span class="theorem-status pending">Pending</span>
                    </div>
                    <div class="theorem-content">
                        The geometry has fourfold rotational symmetry around the vertical axis.
                    </div>
                    <div class="theorem-values" id="theorem-3-values">—</div>
                </div>

                <div class="theorem-box" data-theorem="4">
                    <div class="theorem-header">
                        <h4>Theorem 4: Phase Quadrature</h4>
                        <span class="theorem-status pending">Pending</span>
                    </div>
                    <div class="theorem-content">
                        Phase angles from crossroads to diagonals are exactly 90° apart.
                    </div>
                    <div class="theorem-values" id="theorem-4-values">—</div>
                </div>

                <div class="theorem-box" data-theorem="5">
                    <div class="theorem-header">
                        <h4>Theorem 5: Balance Law</h4>
                        <span class="theorem-status pending">Pending</span>
                    </div>
                    <div class="theorem-content">
                        Torsion sum τ₁ + τ₂ + τ₃ + τ₄ = 0 at the crossroads.
                    </div>
                    <div class="theorem-values" id="theorem-5-values">—</div>
                </div>

                <div class="theorem-box" data-theorem="6">
                    <div class="theorem-header">
                        <h4>Theorem 6: Tetrahelix Angle</h4>
                        <span class="theorem-status pending">Pending</span>
                    </div>
                    <div class="theorem-content">
                        The optimal coil winding angle is 48.19° (Boerdijk-Coxeter).
                    </div>
                    <div class="theorem-values" id="theorem-6-values">—</div>
                </div>

                <div class="theorem-box" data-theorem="7">
                    <div class="theorem-header">
                        <h4>Theorem 7: κ-Shadow Frequency</h4>
                        <span class="theorem-status pending">Pending</span>
                    </div>
                    <div class="theorem-content">
                        The resonant frequency is κ-shadow = 1/κ = 28.65 Hz.
                    </div>
                    <div class="theorem-values" id="theorem-7-values">—</div>
                </div>
            </div>

            <div class="summary-box" id="summary-box" style="display: none;">
                <h3>GEOMETRY LOCKED</h3>
                <p>All 7 theorems proven. The geometry is mathematically verified.</p>
                <p style="margin-top: 1rem; color: var(--text-dim);">
                    If g = -∇s, this geometry creates the gradient.<br>
                    Build it. Test it.
                </p>
            </div>

            <h2>What This Means</h2>

            <p>
                These seven theorems aren't arbitrary requirements. Each one is necessary:
            </p>

            <ul style="list-style: none; padding: 0;">
                <li style="margin: 1rem 0; padding: 1rem; background: rgba(212, 175, 55, 0.1); border-radius: 8px;">
                    <strong>Equidistance</strong> ensures all coils contribute equally
                </li>
                <li style="margin: 1rem 0; padding: 1rem; background: rgba(212, 175, 55, 0.1); border-radius: 8px;">
                    <strong>Square formation</strong> enables perfect 90° phase separation
                </li>
                <li style="margin: 1rem 0; padding: 1rem; background: rgba(212, 175, 55, 0.1); border-radius: 8px;">
                    <strong>Fourfold symmetry</strong> means the system behaves the same from any direction
                </li>
                <li style="margin: 1rem 0; padding: 1rem; background: rgba(212, 175, 55, 0.1); border-radius: 8px;">
                    <strong>Phase quadrature</strong> makes vibrations cancel (balance law)
                </li>
                <li style="margin: 1rem 0; padding: 1rem; background: rgba(212, 175, 55, 0.1); border-radius: 8px;">
                    <strong>Tetrahelix angle</strong> maximizes coupling in the coil geometry
                </li>
                <li style="margin: 1rem 0; padding: 1rem; background: rgba(212, 175, 55, 0.1); border-radius: 8px;">
                    <strong>κ-shadow frequency</strong> is where discrete and continuous resonate
                </li>
            </ul>

            <div class="key-insight">
                <p>The geometry isn't designed. It's <strong>derived</strong>.<br>Once you accept the premises, these properties are inevitable.</p>
            </div>

            <h2>What You Learned</h2>

            <ul style="list-style: none; padding: 0; font-size: 1.1rem;">
                <li style="margin: 1rem 0; padding: 1rem; background: rgba(255, 0, 255, 0.1); border-radius: 8px;">
                    &#x2713; The vessel geometry has 7 verifiable properties
                </li>
                <li style="margin: 1rem 0; padding: 1rem; background: rgba(255, 0, 255, 0.1); border-radius: 8px;">
                    &#x2713; Each property can be mathematically proven
                </li>
                <li style="margin: 1rem 0; padding: 1rem; background: rgba(255, 0, 255, 0.1); border-radius: 8px;">
                    &#x2713; The balance law emerges from phase quadrature
                </li>
                <li style="margin: 1rem 0; padding: 1rem; background: rgba(255, 0, 255, 0.1); border-radius: 8px;">
                    &#x2713; Geometry locks when all theorems are satisfied
                </li>
            </ul>

            <div class="nav-buttons">
                <a href="02-phase-quadrature.html" class="nav-button">
                    <span class="label">Previous</span>
                    &#x2190; Phase Quadrature
                </a>
                <a href="04-euclid-khayyam.html" class="nav-button">
                    <span class="label">Next Lesson</span>
                    Euclid & Khayyam &#x2192;
                </a>
            </div>

        </div>
    </main>

    <footer>
        <div class="signature">[1 = -1]</div>
        <p>Geometry Math | <strong>Have Mind Media</strong></p>
    </footer>

    <script src="../js/circle-engine.js"></script>
    <script>
        // Vessel geometry calculations
        const scale = 0.15;
        const d = scale / Math.sqrt(2);

        const points = {
            O: { x: 0, y: 0, z: 0 },
            NW: { x: -d, y: d, z: 0 },
            NE: { x: d, y: d, z: 0 },
            SW: { x: -d, y: -d, z: 0 },
            SE: { x: d, y: -d, z: 0 },
            Z: { x: 0, y: 0, z: scale },
            N: { x: 0, y: 0, z: -scale }
        };

        function distance(p1, p2) {
            return Math.sqrt(
                Math.pow(p1.x - p2.x, 2) +
                Math.pow(p1.y - p2.y, 2) +
                Math.pow(p1.z - p2.z, 2)
            );
        }

        function runProof() {
            const theorems = [
                // Theorem 1: Equidistance
                function() {
                    const distances = ['NW', 'NE', 'SW', 'SE'].map(n => distance(points.O, points[n]));
                    const allEqual = distances.every(d => Math.abs(d - distances[0]) < 1e-10);
                    return {
                        proven: allEqual,
                        values: `All distances = ${distances[0].toFixed(4)} m`
                    };
                },
                // Theorem 2: Square
                function() {
                    const nodes = ['NW', 'NE', 'SE', 'SW'];
                    const sides = [];
                    for (let i = 0; i < 4; i++) {
                        sides.push(distance(points[nodes[i]], points[nodes[(i+1)%4]]));
                    }
                    const diag1 = distance(points.NW, points.SE);
                    const diag2 = distance(points.NE, points.SW);
                    const sidesEqual = Math.max(...sides) - Math.min(...sides) < 1e-10;
                    const diagsEqual = Math.abs(diag1 - diag2) < 1e-10;
                    const ratioCorrect = Math.abs(diag1 / sides[0] - Math.sqrt(2)) < 1e-10;
                    return {
                        proven: sidesEqual && diagsEqual && ratioCorrect,
                        values: `Sides = ${sides[0].toFixed(4)} m, Diagonals = ${diag1.toFixed(4)} m, Ratio = √2`
                    };
                },
                // Theorem 3: Fourfold Symmetry
                function() {
                    const zDists = ['NW', 'NE', 'SW', 'SE'].map(n => distance(points.Z, points[n]));
                    const nDists = ['NW', 'NE', 'SW', 'SE'].map(n => distance(points.N, points[n]));
                    const zSym = Math.max(...zDists) - Math.min(...zDists) < 1e-10;
                    const nSym = Math.max(...nDists) - Math.min(...nDists) < 1e-10;
                    return {
                        proven: zSym && nSym,
                        values: `Zenith distances = ${zDists[0].toFixed(4)} m, Nadir distances = ${nDists[0].toFixed(4)} m`
                    };
                },
                // Theorem 4: Phase Quadrature
                function() {
                    const angles = {};
                    ['NE', 'NW', 'SW', 'SE'].forEach(n => {
                        angles[n] = (Math.atan2(points[n].y, points[n].x) * 180 / Math.PI + 360) % 360;
                    });
                    const diffs = [];
                    const angleList = Object.values(angles);
                    for (let i = 0; i < 4; i++) {
                        diffs.push((angleList[(i+1)%4] - angleList[i] + 360) % 360);
                    }
                    const all90 = diffs.every(d => Math.abs(d - 90) < 1 || Math.abs(d - 270) < 1);
                    return {
                        proven: all90,
                        values: `Angles: NE=${angles.NE.toFixed(0)}°, NW=${angles.NW.toFixed(0)}°, SW=${angles.SW.toFixed(0)}°, SE=${angles.SE.toFixed(0)}°`
                    };
                },
                // Theorem 5: Balance Law
                function() {
                    const phases = { NW: 0, NE: 90, SW: 180, SE: 270 };
                    const samples = 360;
                    let intSum = [0, 0, 0];
                    for (let t = 0; t < samples; t++) {
                        const omega_t = 2 * Math.PI * t / samples;
                        for (const [name, phase] of Object.entries(phases)) {
                            const amp = Math.sin(omega_t + phase * Math.PI / 180);
                            const p = points[name];
                            const mag = Math.sqrt(p.x*p.x + p.y*p.y);
                            if (mag > 0) {
                                intSum[0] += (-p.x / mag) * amp;
                                intSum[1] += (-p.y / mag) * amp;
                            }
                        }
                    }
                    const avg = intSum.map(s => s / samples);
                    const magnitude = Math.sqrt(avg[0]*avg[0] + avg[1]*avg[1]);
                    return {
                        proven: magnitude < 1e-6,
                        values: `Integrated average = (${avg[0].toFixed(6)}, ${avg[1].toFixed(6)}), |sum| = ${magnitude.toFixed(6)}`
                    };
                },
                // Theorem 6: Tetrahelix Angle
                function() {
                    const bcAngle = Math.acos(2/3) * 180 / Math.PI;
                    return {
                        proven: true,
                        values: `BC angle = arccos(2/3) = ${bcAngle.toFixed(2)}°`
                    };
                },
                // Theorem 7: κ-Shadow Frequency
                function() {
                    const kappa = 2 * Math.PI / 180;
                    const kappaShadow = 1 / kappa;
                    return {
                        proven: true,
                        values: `κ = ${kappa.toFixed(6)}, κ-shadow = ${kappaShadow.toFixed(4)} Hz`
                    };
                }
            ];

            let delay = 0;
            let allProven = true;

            theorems.forEach((theorem, i) => {
                setTimeout(() => {
                    const result = theorem();
                    const box = document.querySelector(`.theorem-box[data-theorem="${i+1}"]`);
                    const status = box.querySelector('.theorem-status');
                    const values = document.getElementById(`theorem-${i+1}-values`);

                    if (result.proven) {
                        box.classList.add('proven');
                        status.classList.remove('pending');
                        status.classList.add('proven');
                        status.textContent = 'Proven ✓';
                    } else {
                        allProven = false;
                        status.textContent = 'Failed ✗';
                        status.style.background = 'var(--red)';
                    }

                    values.textContent = result.values;

                    if (i === theorems.length - 1 && allProven) {
                        setTimeout(() => {
                            const summary = document.getElementById('summary-box');
                            summary.style.display = 'block';
                            summary.classList.add('success');
                            summary.scrollIntoView({ behavior: 'smooth' });
                        }, 500);
                    }
                }, delay);
                delay += 400;
            });
        }

        document.getElementById('run-proof').onclick = runProof;
    </script>
</body>
</html>
