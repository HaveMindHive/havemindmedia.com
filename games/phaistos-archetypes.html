<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phaistos Archetypes | Have Mind Media</title>
    <style>
        :root {
            --gold: #FFD700;
            --shadow: #8B0000;
            --coin: #4A9B9B;
            --bg-deep: #0a0a1a;
            --bg-purple: #1a0a2e;
            --text-light: #e0e0e0;

            /* Archetype colors */
            --walker: #4169E1;
            --helmeted: #708090;
            --child: #FFB6C1;
            --bound: #8B4513;
            --eagle: #DAA520;
            --shield: #228B22;
            --wave: #1E90FF;
            --flower: #FF69B4;
            --spiral: #9932CC;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, var(--bg-deep) 0%, var(--bg-purple) 100%);
            min-height: 100vh;
            color: var(--text-light);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 20px 0;
        }

        h1 {
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--gold), #fff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            opacity: 0.8;
            margin: 5px 0;
        }

        .epoch-mark {
            color: var(--gold);
            font-size: 0.9rem;
        }

        /* Tabs */
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .tab {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 215, 0, 0.2);
            color: var(--text-light);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab:hover, .tab.active {
            background: var(--gold);
            color: var(--bg-deep);
            border-color: var(--gold);
        }

        /* Panels */
        .panel {
            display: none;
        }

        .panel.active {
            display: block;
        }

        /* Archetype Grid */
        .archetype-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        @media (max-width: 700px) {
            .archetype-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .archetype-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .archetype-card:hover {
            border-color: var(--gold);
            transform: translateY(-5px);
        }

        .archetype-card.selected {
            border-color: var(--gold);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .archetype-symbol {
            font-size: 4rem;
            margin-bottom: 10px;
        }

        .archetype-name {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--gold);
            margin-bottom: 5px;
        }

        .archetype-meaning {
            font-size: 0.85rem;
            opacity: 0.7;
        }

        /* Spectrum Display */
        .spectrum-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }

        .spectrum-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .spectrum-header h2 {
            color: var(--gold);
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .spectrum-header .symbol {
            font-size: 5rem;
        }

        .spectrum-row {
            display: grid;
            grid-template-columns: 1fr 80px 1fr;
            gap: 20px;
            align-items: center;
            margin: 20px 0;
        }

        .spectrum-pole {
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .spectrum-pole.positive {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(76, 175, 80, 0.1));
            border: 2px solid rgba(76, 175, 80, 0.5);
        }

        .spectrum-pole.negative {
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.2), rgba(244, 67, 54, 0.1));
            border: 2px solid rgba(244, 67, 54, 0.5);
        }

        .spectrum-pole h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .spectrum-pole.positive h3 { color: #4CAF50; }
        .spectrum-pole.negative h3 { color: #f44336; }

        .spectrum-pole p {
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .spectrum-center {
            text-align: center;
        }

        .coin-aspect {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .coin-symbol {
            font-size: 2.5rem;
            color: var(--coin);
        }

        .coin-label {
            font-size: 0.8rem;
            color: var(--coin);
            text-transform: uppercase;
        }

        /* Shadow Operator Section */
        .shadow-section {
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.2), rgba(139, 0, 0, 0.1));
            border: 2px solid rgba(139, 0, 0, 0.5);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .shadow-section h3 {
            color: var(--shadow);
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .shadow-section p {
            line-height: 1.7;
        }

        .shadow-effect {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .shadow-arrow {
            font-size: 1.5rem;
            color: var(--shadow);
        }

        /* Quiz Section */
        .quiz-container {
            text-align: center;
        }

        .quiz-prompt {
            font-size: 1.3rem;
            margin: 20px 0;
        }

        .quiz-symbol {
            font-size: 6rem;
            margin: 30px 0;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            max-width: 600px;
            margin: 30px auto;
        }

        .quiz-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            border-color: var(--gold);
        }

        .quiz-option.correct {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.2);
        }

        .quiz-option.incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.2);
        }

        .quiz-result {
            font-size: 1.5rem;
            margin: 20px 0;
            min-height: 50px;
        }

        .quiz-result.correct { color: #4CAF50; }
        .quiz-result.incorrect { color: #f44336; }

        /* Stats */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--gold);
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
        }

        button {
            background: linear-gradient(135deg, var(--gold), #ffa500);
            border: none;
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: bold;
            color: var(--bg-deep);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }

        button.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        /* Explanation Box */
        .explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .explanation h3 {
            color: var(--gold);
            margin-bottom: 15px;
        }

        .explanation p {
            line-height: 1.8;
            margin-bottom: 10px;
        }

        footer {
            text-align: center;
            padding: 30px;
            opacity: 0.6;
        }

        footer a {
            color: var(--gold);
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Phaistos Archetypes</h1>
            <p class="subtitle">9 Archetypal Symbols Â· Good/Bad/Coin Spectrum Â· Shadow Operator</p>
            <p class="epoch-mark">[1 = -1]</p>
        </header>

        <div class="tabs">
            <button class="tab active" data-panel="explore">Explore Archetypes</button>
            <button class="tab" data-panel="quiz">Spectrum Quiz</button>
            <button class="tab" data-panel="shadow">Shadow Training</button>
        </div>

        <!-- EXPLORE PANEL -->
        <div class="panel active" id="panel-explore">
            <p style="text-align: center; margin-bottom: 20px; opacity: 0.8;">
                Select an archetype to explore its spectrum (positive/negative) and coin aspect.
            </p>

            <div class="archetype-grid" id="archetypeGrid">
                <!-- Populated by JS -->
            </div>

            <div class="spectrum-container" id="spectrumDisplay" style="display: none;">
                <!-- Populated by JS -->
            </div>
        </div>

        <!-- QUIZ PANEL -->
        <div class="panel" id="panel-quiz">
            <div class="quiz-container">
                <div class="stats-bar">
                    <div class="stat">
                        <div class="stat-value" id="quizScore">0</div>
                        <div class="stat-label">Score</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="quizStreak">0</div>
                        <div class="stat-label">Streak</div>
                    </div>
                </div>

                <p class="quiz-prompt" id="quizPrompt">Which archetype is this?</p>

                <div class="quiz-symbol" id="quizSymbol">ğŸš¶</div>

                <div class="quiz-options" id="quizOptions">
                    <!-- Populated by JS -->
                </div>

                <div class="quiz-result" id="quizResult"></div>

                <div class="controls">
                    <button onclick="quiz.nextRound()">Next</button>
                    <button class="secondary" onclick="quiz.reset()">Reset</button>
                </div>
            </div>
        </div>

        <!-- SHADOW TRAINING PANEL -->
        <div class="panel" id="panel-shadow">
            <div class="explanation">
                <h3>The Shadow Operator</h3>
                <p>
                    In the Epoch Model, the <strong>shadow operator</strong> (Îº_shadow = 28.65) transforms
                    each archetype by revealing its hidden aspect. When you apply shadow to any pole of the spectrum,
                    it reveals what was hiddenâ€”but the effect differs based on which pole you're operating on.
                </p>
                <p style="color: var(--gold);">
                    <strong>Positive â†’ Shadow:</strong> Reveals the shadow side of virtue (how good becomes rigid or blind)<br>
                    <strong>Negative â†’ Shadow:</strong> Reveals the hidden gift within the wound (how pain becomes wisdom)<br>
                    <strong>Coin â†’ Shadow:</strong> Reveals the observer's bias (how neutrality is never truly neutral)
                </p>
            </div>

            <div class="quiz-container">
                <p class="quiz-prompt" id="shadowPrompt">Loading...</p>

                <div class="quiz-symbol" id="shadowSymbol">ğŸš¶</div>

                <div class="quiz-options" id="shadowOptions">
                    <!-- Populated by JS -->
                </div>

                <div class="quiz-result" id="shadowResult"></div>

                <div class="controls">
                    <button onclick="shadowQuiz.nextRound()">Next Challenge</button>
                </div>
            </div>
        </div>

        <div class="explanation">
            <h3>The Phaistos Disc Connection</h3>
            <p>
                The Phaistos Disc (c. 1700 BCE) contains 45 distinct symbols arranged in a spiralâ€”a proto-language
                that may encode archetypal human experiences. Like the disc, these 9 archetypes represent
                fundamental patterns of consciousness.
            </p>
            <p>
                Each archetype exists on a <strong>spectrum</strong>. The same energy that makes someone a protector
                can make them a tyrant. The spectrum isn't about "good vs evil"â€”it's about <em>integration vs fragmentation</em>.
            </p>
            <p>
                The <strong>Coin Aspect</strong> represents the neutral observer positionâ€”neither positive nor negative,
                but the axis around which both rotate. This is the triaxial nature: not binary opposition, but
                three-pointed stability.
            </p>
        </div>
    </div>

    <footer>
        <p>Have Mind Media | Developer: Alessandra Ray</p>
        <p><a href="index.html">â† Back to Games</a></p>
    </footer>

    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // THE 9 ARCHETYPES (Phaistos-inspired)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        const ARCHETYPES = [
            {
                id: 1,
                name: "The Walker",
                symbol: "ğŸš¶",
                q: 1,
                meaning: "Journey, movement, becoming",
                positive: {
                    title: "The Pilgrim",
                    description: "One who walks with purpose, seeking truth. Each step is deliberate. The journey IS the destination. Growth through motion."
                },
                negative: {
                    title: "The Wanderer",
                    description: "Aimless movement without purpose. Running from rather than toward. Motion as escape from stillness. Restlessness as wound."
                },
                coin: "The Path itselfâ€”neither traveler nor destination, but the space between.",
                shadow: {
                    onPositive: "The Pilgrim's shadow: rigid attachment to 'the one true path.' Spiritual bypassing. Using the journey to avoid arriving.",
                    onNegative: "The Wanderer's hidden gift: freedom from attachment. Ability to let go. The wisdom of not needing to know where you're going.",
                    onCoin: "The Path's shadow: the observer's belief that they are not also walking."
                }
            },
            {
                id: 2,
                name: "The Helmeted",
                symbol: "â›‘ï¸",
                q: 2,
                meaning: "Protection, authority, identity",
                positive: {
                    title: "The Guardian",
                    description: "Protector of the vulnerable. Strength in service. The helmet as symbol of responsibility, not domination."
                },
                negative: {
                    title: "The Tyrant",
                    description: "Protection turned to control. Armor as isolation. The one who protects by imprisoning. Fear disguised as care."
                },
                coin: "The Helmet itselfâ€”neither protector nor oppressor, but the boundary between self and other.",
                shadow: {
                    onPositive: "The Guardian's shadow: savior complex. Protecting others to avoid protecting self. Identity dependent on being needed.",
                    onNegative: "The Tyrant's hidden gift: clear boundaries. Ability to say no. The power to separate what serves from what harms.",
                    onCoin: "The Helmet's shadow: the false belief that we can be truly separate."
                }
            },
            {
                id: 3,
                name: "The Child",
                symbol: "ğŸ‘¶",
                q: 3,
                meaning: "Innocence, potential, beginning",
                positive: {
                    title: "The Wonder",
                    description: "Pure presence. Beginner's mind. The ability to see everything as if for the first time. Unconditioned response."
                },
                negative: {
                    title: "The Wounded",
                    description: "Frozen development. The inner child stuck in survival. Innocence as naivety. Refusal to grow as protection."
                },
                coin: "Potential itselfâ€”neither actualized nor abandoned, but the space of possibility.",
                shadow: {
                    onPositive: "The Wonder's shadow: spiritual bypassing through false innocence. Using 'beginner's mind' to avoid accumulated wisdom.",
                    onNegative: "The Wounded's hidden gift: access to authentic vulnerability. The wisdom of knowing what hurts.",
                    onCoin: "Potential's shadow: the fear that actualization will destroy possibility."
                }
            },
            {
                id: 4,
                name: "The Bound",
                symbol: "â›“ï¸",
                q: 4,
                meaning: "Commitment, constraint, foundation",
                positive: {
                    title: "The Devoted",
                    description: "Commitment as liberation. Chains chosen become wings. The power of limitation to create form."
                },
                negative: {
                    title: "The Prisoner",
                    description: "Chains unconsciously accepted. Bondage to conditioning. Comfort in captivity. Fear of the open door."
                },
                coin: "The Chain itselfâ€”neither binding nor freeing, but the relationship between things.",
                shadow: {
                    onPositive: "The Devoted's shadow: attachment disguised as commitment. Loyalty as fear of change. 'I choose this' as denial.",
                    onNegative: "The Prisoner's hidden gift: understanding of structure. Knowledge of what holds things together. Intimacy with limitation.",
                    onCoin: "The Chain's shadow: the illusion that anything is truly separate enough to be bound."
                }
            },
            {
                id: 5,
                name: "The Eagle",
                symbol: "ğŸ¦…",
                q: 5,
                meaning: "Vision, transcendence, overview",
                positive: {
                    title: "The Seer",
                    description: "Perspective from height. Ability to see patterns invisible at ground level. Vision as service."
                },
                negative: {
                    title: "The Detached",
                    description: "Elevation as escape. Using vision to avoid involvement. Judgment from above. Cold observation."
                },
                coin: "Height itselfâ€”neither earth nor sky, but the distance between.",
                shadow: {
                    onPositive: "The Seer's shadow: spiritual pride. 'I see what you cannot see.' Vision without compassion. Prophecy as power.",
                    onNegative: "The Detached's hidden gift: non-attachment. Ability to witness without being destroyed. Objectivity as medicine.",
                    onCoin: "Height's shadow: the belief that overview and involvement are mutually exclusive."
                }
            },
            {
                id: 6,
                name: "The Shield",
                symbol: "ğŸ›¡ï¸",
                q: 6,
                meaning: "Defense, reflection, boundary",
                positive: {
                    title: "The Reflector",
                    description: "Mirror that shows truth. Boundary that teaches. Defense that serves growth by showing what attacks."
                },
                negative: {
                    title: "The Wall",
                    description: "Impenetrable defense. Nothing in, nothing out. Protection that becomes prison. Armor as identity."
                },
                coin: "The Surface itselfâ€”neither attacker nor defender, but the point of contact.",
                shadow: {
                    onPositive: "The Reflector's shadow: using 'truth-telling' as weapon. Showing others their flaws while hiding one's own.",
                    onNegative: "The Wall's hidden gift: clear limits. Knowing where self ends and other begins. Healthy no.",
                    onCoin: "The Surface's shadow: the belief that anything truly touches or truly separates."
                }
            },
            {
                id: 7,
                name: "The Wave",
                symbol: "ğŸŒŠ",
                q: 7,
                meaning: "Flow, emotion, change",
                positive: {
                    title: "The Flowing",
                    description: "Surrender to what is. Emotional intelligence. The power of yielding. Water that wears stone."
                },
                negative: {
                    title: "The Flooded",
                    description: "Overwhelmed by feeling. No container for emotion. Drowning in the inner sea. Chaos as lifestyle."
                },
                coin: "Movement itselfâ€”neither wave nor stillness, but the ocean that contains both.",
                shadow: {
                    onPositive: "The Flowing's shadow: spiritual bypassing through acceptance. 'Going with the flow' as avoidance of discernment.",
                    onNegative: "The Flooded's hidden gift: depth of feeling. Access to the full range of human experience. Nothing is unfelt.",
                    onCoin: "Movement's shadow: the illusion that stillness and motion are opposites."
                }
            },
            {
                id: 8,
                name: "The Flower",
                symbol: "ğŸŒ¸",
                q: 8,
                meaning: "Beauty, expression, unfolding",
                positive: {
                    title: "The Blossoming",
                    description: "Natural unfolding of potential. Beauty as truth made visible. Expression without performance."
                },
                negative: {
                    title: "The Wilting",
                    description: "Expression blocked. Beauty seeking external validation. The flower that opens for applause. Performance as wound."
                },
                coin: "Unfolding itselfâ€”neither bud nor bloom, but the process between.",
                shadow: {
                    onPositive: "The Blossoming's shadow: attachment to being seen as beautiful. Authenticity as brand. Natural as performance.",
                    onNegative: "The Wilting's hidden gift: sensitivity to environment. Knowing what nourishes and what depletes. Discernment.",
                    onCoin: "Unfolding's shadow: the fear that full blooming means death is near."
                }
            },
            {
                id: 9,
                name: "The Spiral",
                symbol: "ğŸŒ€",
                q: 9,
                meaning: "Return, completion, transcendence",
                positive: {
                    title: "The Returning",
                    description: "Coming back to beginning with new eyes. The spiral that seems to repeat but rises. Wisdom as integration."
                },
                negative: {
                    title: "The Stuck",
                    description: "Repeating without learning. The loop that doesn't rise. Patterns as prison. 'Here we go again.'"
                },
                coin: "The Center itselfâ€”neither moving nor still, the axis around which everything turns.",
                shadow: {
                    onPositive: "The Returning's shadow: spiritual pride in 'growth.' Using evolution to avoid presence. Always becoming, never being.",
                    onNegative: "The Stuck's hidden gift: thoroughness. The pattern has not been truly seen. Another turn may reveal what was missed.",
                    onCoin: "The Center's shadow: believing one has found it and need not look again."
                }
            }
        ];

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // EXPLORE PANEL
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function renderArchetypeGrid() {
            const grid = document.getElementById('archetypeGrid');
            grid.innerHTML = ARCHETYPES.map(a => `
                <div class="archetype-card" data-id="${a.id}">
                    <div class="archetype-symbol">${a.symbol}</div>
                    <div class="archetype-name">${a.name}</div>
                    <div class="archetype-meaning">${a.meaning}</div>
                </div>
            `).join('');

            grid.querySelectorAll('.archetype-card').forEach(card => {
                card.addEventListener('click', () => {
                    grid.querySelectorAll('.archetype-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    showSpectrum(parseInt(card.dataset.id));
                });
            });
        }

        function showSpectrum(id) {
            const arch = ARCHETYPES.find(a => a.id === id);
            const display = document.getElementById('spectrumDisplay');

            display.style.display = 'block';
            display.innerHTML = `
                <div class="spectrum-header">
                    <div class="symbol">${arch.symbol}</div>
                    <h2>${arch.name}</h2>
                    <p style="opacity: 0.8;">${arch.meaning}</p>
                </div>

                <div class="spectrum-row">
                    <div class="spectrum-pole positive">
                        <h3>âœ¦ ${arch.positive.title}</h3>
                        <p>${arch.positive.description}</p>
                    </div>

                    <div class="spectrum-center">
                        <div class="coin-aspect">
                            <div class="coin-symbol">â˜¯</div>
                            <div class="coin-label">Coin</div>
                        </div>
                    </div>

                    <div class="spectrum-pole negative">
                        <h3>âœ§ ${arch.negative.title}</h3>
                        <p>${arch.negative.description}</p>
                    </div>
                </div>

                <p style="text-align: center; margin: 20px 0; font-style: italic; color: var(--coin);">
                    "${arch.coin}"
                </p>

                <div class="shadow-section">
                    <h3>â˜½ Shadow Operator Effects</h3>
                    <div class="shadow-effect">
                        <span class="shadow-arrow">âœ¦ â†’ â˜½</span>
                        <p>${arch.shadow.onPositive}</p>
                    </div>
                    <div class="shadow-effect">
                        <span class="shadow-arrow">âœ§ â†’ â˜½</span>
                        <p>${arch.shadow.onNegative}</p>
                    </div>
                    <div class="shadow-effect">
                        <span class="shadow-arrow">â˜¯ â†’ â˜½</span>
                        <p>${arch.shadow.onCoin}</p>
                    </div>
                </div>
            `;

            display.scrollIntoView({ behavior: 'smooth' });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // QUIZ
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        const quiz = {
            score: 0,
            streak: 0,
            currentArchetype: null,
            revealed: false,

            nextRound() {
                this.revealed = false;
                this.currentArchetype = ARCHETYPES[Math.floor(Math.random() * ARCHETYPES.length)];

                document.getElementById('quizSymbol').textContent = this.currentArchetype.symbol;
                document.getElementById('quizResult').textContent = '';
                document.getElementById('quizResult').className = 'quiz-result';

                // Generate 3 options (including correct)
                let options = [this.currentArchetype];
                while (options.length < 3) {
                    const rand = ARCHETYPES[Math.floor(Math.random() * ARCHETYPES.length)];
                    if (!options.find(o => o.id === rand.id)) {
                        options.push(rand);
                    }
                }
                options = this.shuffle(options);

                const container = document.getElementById('quizOptions');
                container.innerHTML = options.map(o => `
                    <div class="quiz-option" data-id="${o.id}">
                        <strong>${o.name}</strong><br>
                        <span style="font-size: 0.85rem; opacity: 0.7;">${o.meaning}</span>
                    </div>
                `).join('');

                container.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.addEventListener('click', () => this.handleChoice(parseInt(opt.dataset.id)));
                });
            },

            handleChoice(id) {
                if (this.revealed) return;
                this.revealed = true;

                const isCorrect = id === this.currentArchetype.id;
                const resultEl = document.getElementById('quizResult');

                if (isCorrect) {
                    this.score++;
                    this.streak++;
                    resultEl.textContent = `Correct! ${this.currentArchetype.name}`;
                    resultEl.className = 'quiz-result correct';
                } else {
                    this.streak = 0;
                    resultEl.textContent = `It was ${this.currentArchetype.name}`;
                    resultEl.className = 'quiz-result incorrect';
                }

                document.querySelectorAll('.quiz-option').forEach(opt => {
                    const optId = parseInt(opt.dataset.id);
                    if (optId === this.currentArchetype.id) {
                        opt.classList.add('correct');
                    } else if (optId === id) {
                        opt.classList.add('incorrect');
                    }
                });

                document.getElementById('quizScore').textContent = this.score;
                document.getElementById('quizStreak').textContent = this.streak;
            },

            reset() {
                this.score = 0;
                this.streak = 0;
                document.getElementById('quizScore').textContent = 0;
                document.getElementById('quizStreak').textContent = 0;
                this.nextRound();
            },

            shuffle(array) {
                const arr = [...array];
                for (let i = arr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [arr[i], arr[j]] = [arr[j], arr[i]];
                }
                return arr;
            }
        };

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SHADOW QUIZ
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        const shadowQuiz = {
            currentArchetype: null,
            currentPole: null,  // 'positive', 'negative', or 'coin'
            revealed: false,

            nextRound() {
                this.revealed = false;
                this.currentArchetype = ARCHETYPES[Math.floor(Math.random() * ARCHETYPES.length)];
                const poles = ['positive', 'negative', 'coin'];
                this.currentPole = poles[Math.floor(Math.random() * poles.length)];

                const poleLabels = {
                    positive: `the positive aspect (${this.currentArchetype.positive.title})`,
                    negative: `the negative aspect (${this.currentArchetype.negative.title})`,
                    coin: 'the coin aspect'
                };

                document.getElementById('shadowSymbol').textContent = this.currentArchetype.symbol;
                document.getElementById('shadowPrompt').textContent =
                    `What happens when the Shadow Operator is applied to ${poleLabels[this.currentPole]} of ${this.currentArchetype.name}?`;

                document.getElementById('shadowResult').textContent = '';

                // Get correct answer
                const shadowKeys = { positive: 'onPositive', negative: 'onNegative', coin: 'onCoin' };
                const correctAnswer = this.currentArchetype.shadow[shadowKeys[this.currentPole]];

                // Generate options: correct + 2 wrong from other archetypes
                let options = [{ text: correctAnswer, correct: true }];

                while (options.length < 3) {
                    const randArch = ARCHETYPES[Math.floor(Math.random() * ARCHETYPES.length)];
                    const randPole = poles[Math.floor(Math.random() * poles.length)];
                    const wrongAnswer = randArch.shadow[shadowKeys[randPole]];

                    if (!options.find(o => o.text === wrongAnswer)) {
                        options.push({ text: wrongAnswer, correct: false });
                    }
                }

                options = this.shuffle(options);

                const container = document.getElementById('shadowOptions');
                container.innerHTML = options.map((o, i) => `
                    <div class="quiz-option" data-correct="${o.correct}" style="grid-column: span 3;">
                        <p style="font-size: 0.95rem;">${o.text}</p>
                    </div>
                `).join('');

                container.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.addEventListener('click', () => this.handleChoice(opt));
                });
            },

            handleChoice(opt) {
                if (this.revealed) return;
                this.revealed = true;

                const isCorrect = opt.dataset.correct === 'true';
                const resultEl = document.getElementById('shadowResult');

                if (isCorrect) {
                    resultEl.textContent = 'Correct! You understand how shadow operates on this archetype.';
                    resultEl.className = 'quiz-result correct';
                } else {
                    resultEl.textContent = 'Not quite. Shadow transforms differently for each pole.';
                    resultEl.className = 'quiz-result incorrect';
                }

                document.querySelectorAll('#shadowOptions .quiz-option').forEach(o => {
                    if (o.dataset.correct === 'true') {
                        o.classList.add('correct');
                    } else if (o === opt) {
                        o.classList.add('incorrect');
                    }
                });
            },

            shuffle(array) {
                const arr = [...array];
                for (let i = arr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [arr[i], arr[j]] = [arr[j], arr[i]];
                }
                return arr;
            }
        };

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // TAB SWITCHING
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));

                tab.classList.add('active');
                document.getElementById(`panel-${tab.dataset.panel}`).classList.add('active');
            });
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // INIT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        renderArchetypeGrid();
        quiz.nextRound();
        shadowQuiz.nextRound();
    </script>
</body>
</html>
