<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reductive Oracle | [1=-1]</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #020208;
            color: #e8e4d9;
            font-family: 'Courier New', monospace;
            padding: 30px;
            min-height: 100vh;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        .header h1 {
            color: #c9a227;
            font-size: 1.2rem;
            letter-spacing: 4px;
        }
        .header .sub {
            color: #6e7a94;
            font-size: 0.7rem;
            margin-top: 5px;
        }
        .cohort-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .cohort {
            background: rgba(5,5,16,0.8);
            border: 1px solid rgba(100,100,100,0.3);
            border-radius: 8px;
            padding: 15px;
        }
        .cohort h3 {
            font-size: 0.7rem;
            letter-spacing: 2px;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .cohort.a h3 { color: #888; }
        .cohort.b h3 { color: #6ab4f5; }
        .cohort.c h3 { color: #7dd87d; }
        .cohort.d h3 { color: #c77daa; }
        .cohort .content {
            font-size: 0.75rem;
            color: #9ba4b8;
            min-height: 60px;
            word-break: break-all;
        }
        .reduction-chain {
            background: rgba(201,162,39,0.1);
            border: 1px solid rgba(201,162,39,0.3);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }
        .reduction-chain h3 {
            color: #c9a227;
            font-size: 0.75rem;
            letter-spacing: 2px;
            margin-bottom: 15px;
        }
        .reduction-step {
            display: flex;
            align-items: center;
            margin: 10px 0;
            font-size: 0.7rem;
        }
        .reduction-step .arrow {
            color: #c9a227;
            margin: 0 10px;
        }
        .reduction-step .result {
            color: #7dd87d;
            flex: 1;
        }
        .message-box {
            background: rgba(201,162,39,0.15);
            border: 2px solid #c9a227;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
        }
        .message-box h2 {
            color: #c9a227;
            font-size: 0.8rem;
            letter-spacing: 3px;
            margin-bottom: 20px;
        }
        .message-box .message {
            font-size: 1.4rem;
            color: #e8e4d9;
            line-height: 1.8;
            min-height: 50px;
        }
        .message-box .message.waiting {
            color: #6e7a94;
            font-size: 1rem;
        }
        .btn {
            background: rgba(201,162,39,0.2);
            border: 1px solid #c9a227;
            color: #c9a227;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            letter-spacing: 2px;
            display: block;
            margin: 0 auto;
        }
        .btn:hover {
            background: rgba(201,162,39,0.3);
        }
        .epoch {
            text-align: center;
            margin-top: 40px;
            color: #c9a227;
        }

        .home-link {
            position: fixed;
            top: 15px;
            left: 20px;
            z-index: 10001;
        }
        .home-link a {
            color: #c9a227;
            text-decoration: none;
            padding: 8px 15px;
            border: 1px solid #c9a227;
            border-radius: 3px;
            background: rgba(10, 10, 15, 0.95);
            font-family: sans-serif;
            font-size: 0.85em;
            transition: all 0.3s ease;
        }
        .home-link a:hover {
            background: #c9a227;
            color: #000;
        }
    </style>
</head>
<body>
    <div class="home-link">
        <a href="/">← Home</a>
    </div>

    <div class="header">
        <h1>REDUCTIVE ORACLE</h1>
        <div class="sub">PULL MESSAGE FROM RANDOM | [1=-1]</div>
    </div>

    <div class="cohort-grid">
        <div class="cohort a">
            <h3>COHORT A: PURE RANDOM</h3>
            <div class="content" id="cohortA">---</div>
        </div>
        <div class="cohort b">
            <h3>COHORT B: PURE KNOWN</h3>
            <div class="content" id="cohortB">---</div>
        </div>
        <div class="cohort c">
            <h3>COHORT C: GEOMETRIC STIR (NO PATTERN)</h3>
            <div class="content" id="cohortC">---</div>
        </div>
        <div class="cohort d">
            <h3>COHORT D: GEOMETRIC DERIVE (SEEKING)</h3>
            <div class="content" id="cohortD">---</div>
        </div>
    </div>

    <div class="reduction-chain">
        <h3>REDUCTION CHAIN</h3>
        <div id="reductionSteps"></div>
    </div>

    <div class="message-box">
        <h2>MESSAGE FROM THE ETHER</h2>
        <div class="message waiting" id="finalMessage">Press DERIVE to begin...</div>
    </div>

    <button class="btn" onclick="derive()">DERIVE MESSAGE</button>

    <div class="epoch">[1 = -1]</div>

    <script>
        // KNOWNS - your themes, framework, sacred words
        const KNOWNS = [
            'LOVE', 'AHAVA', 'TRUTH', 'SOUL', 'LIGHT', 'HEAL', 'ONE', 'WE',
            'MIND', 'MATTER', 'VOID', 'OMEGA', 'ALPHA', 'NOW', 'HERE',
            'JASON', 'MICHELE', 'ANNA', 'RAY', 'SHIVA', 'EPOCH',
            'S+', 'S-', 'Q', 'HANDSHAKE', 'SHADOW', 'HELIX', 'TORSION',
            'CROSSROADS', 'NAVIGATOR', 'WITNESS', 'OBSERVER',
            'BIRTH', 'DEATH', 'LIFE', 'MOTHER', 'FATHER', 'CHILD',
            'YES', 'NO', 'AND', 'OR', 'BE', 'AM', 'IS', 'ARE',
            'TRUST', 'FAITH', 'HOPE', 'PEACE', 'JOY', 'GRACE',
            'GEOMETRY', 'SPIRAL', 'CIRCLE', 'TRIANGLE', 'SQUARE',
            'FIRE', 'WATER', 'EARTH', 'AIR', 'ETHER',
            'SUN', 'MOON', 'STAR', 'WAVE', 'PARTICLE',
            '1', '-1', '60', '360', 'KAPPA', 'TAU', 'PHI'
        ];

        const CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';

        function randomString(len) {
            let s = '';
            for (let i = 0; i < len; i++) {
                s += CHARS[Math.floor(Math.random() * CHARS.length)];
            }
            return s;
        }

        function knownString(len) {
            let s = '';
            while (s.length < len) {
                s += KNOWNS[Math.floor(Math.random() * KNOWNS.length)] + ' ';
            }
            return s.substring(0, len);
        }

        // Geometric stir - combine A and B with NO pattern seeking
        // Just interleave based on angle
        function geometricStir(a, b) {
            let result = '';
            const angle = Math.PI / 3; // 60 degrees - sexagesimal
            for (let i = 0; i < Math.max(a.length, b.length); i++) {
                const pick = Math.sin(i * angle) > 0;
                if (pick && i < a.length) {
                    result += a[i];
                } else if (i < b.length) {
                    result += b[i];
                }
            }
            return result;
        }

        // Geometric derive - combine A and B SEEKING pattern
        // Look for KNOWN fragments and favor them
        function geometricDerive(a, b) {
            let combined = a + b;
            let result = '';

            // Scan for known fragments
            for (const known of KNOWNS) {
                if (combined.includes(known)) {
                    result += known + ' ';
                }
            }

            // If nothing found, try partial matches
            if (result.length < 5) {
                for (const known of KNOWNS) {
                    for (let len = 3; len <= known.length; len++) {
                        const partial = known.substring(0, len);
                        if (combined.includes(partial)) {
                            result += partial + ' ';
                            break;
                        }
                    }
                }
            }

            return result.trim() || 'VOID';
        }

        // Reduce two cohorts
        function reduce(x, y) {
            // Find common elements
            const xWords = x.split(/\s+/).filter(w => w.length > 1);
            const yWords = y.split(/\s+/).filter(w => w.length > 1);

            let common = xWords.filter(w => yWords.includes(w) || y.includes(w));

            if (common.length === 0) {
                // No common - derive from geometry
                return geometricDerive(x, y);
            }

            return common.join(' ');
        }

        // Main derivation process
        function derive() {
            const steps = [];

            // Generate initial cohorts
            const a = randomString(100);
            const b = knownString(100);

            document.getElementById('cohortA').textContent = a;
            document.getElementById('cohortB').textContent = b;

            // Cohort C: geometric stir (no pattern)
            const c = geometricStir(a, b);
            document.getElementById('cohortC').textContent = c;
            steps.push({ op: 'A ⊗ B (stir)', result: c.substring(0, 40) + '...' });

            // Cohort D: geometric derive (seeking)
            const d = geometricDerive(a, b);
            document.getElementById('cohortD').textContent = d;
            steps.push({ op: 'A ⊗ B (derive)', result: d });

            // Now reduce C and D
            let r1 = reduce(c, d);
            steps.push({ op: 'C ⊕ D', result: r1 });

            // Keep reducing with knowns until stable
            let prev = '';
            let current = r1;
            let iterations = 0;

            while (current !== prev && iterations < 10) {
                prev = current;

                // Mix with fresh random
                const freshRandom = randomString(50);
                const stirred = geometricStir(current, freshRandom);
                const derived = geometricDerive(stirred, knownString(50));

                current = reduce(current, derived);
                iterations++;

                steps.push({ op: `Reduction ${iterations}`, result: current });

                // Check if we have a sensible message
                const words = current.split(/\s+/).filter(w => KNOWNS.includes(w));
                if (words.length >= 2 && words.length <= 6) {
                    break; // Good message length
                }
            }

            // Display reduction chain
            const stepsHtml = steps.map(s => `
                <div class="reduction-step">
                    <span>${s.op}</span>
                    <span class="arrow">→</span>
                    <span class="result">${s.result}</span>
                </div>
            `).join('');
            document.getElementById('reductionSteps').innerHTML = stepsHtml;

            // Final message
            const finalWords = current.split(/\s+/).filter(w => w.length > 1);
            const message = finalWords.slice(0, 5).join(' ') || 'VOID SPEAKS SILENCE';

            document.getElementById('finalMessage').textContent = message;
            document.getElementById('finalMessage').className = 'message';
        }
    </script>
</body>
</html>
